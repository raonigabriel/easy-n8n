{
  "name": "RAG - Ingest üë©‚Äçüéì",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -720,
        -160
      ],
      "id": "529081c3-f446-4085-a5df-a8d7e3bcebc6",
      "name": "When clicking ‚ÄòTest workflow‚Äô"
    },
    {
      "parameters": {
        "mode": "insert",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.1,
      "position": [
        -40,
        -160
      ],
      "id": "ce8970a5-e703-4dc2-b737-073c3d1d4a90",
      "name": "Postgres PGVector Store",
      "credentials": {
        "postgres": {
          "id": "m24TX4WQSDb5SDrS",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "ingestedOn",
                "value": "={{ $now.format('yyyy-MM-dd') }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        60,
        60
      ],
      "id": "820434a7-0e3b-4795-87ca-03a44dee1d96",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "chunkSize": 4096,
        "chunkOverlap": 256,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        140,
        260
      ],
      "id": "817de99a-7f28-456d-8bbc-354ad0d0be31",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "url": "https://arq.pciconcursos.com.br/ufpr-promove-concurso-publico-com-25-vagas/1672798/a4b838ec98/edital_de_abertura_n_102_1672798.pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -280,
        -160
      ],
      "id": "50d7cbd3-b0e4-4828-86a4-a28358a6aeaa",
      "name": "Download PDF"
    },
    {
      "parameters": {
        "options": {
          "stripNewLines": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -80,
        40
      ],
      "id": "83901511-5adb-4e33-b2a3-ede337a503e7",
      "name": "text-embeddings-3-small",
      "credentials": {
        "openAiApi": {
          "id": "O25zo7ZGYB7ypLZz",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "DROP TABLE IF EXISTS n8n_vectors",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -500,
        -160
      ],
      "id": "a49d92a9-2622-4296-b106-aaa07a4ce8f5",
      "name": "Drop Table",
      "credentials": {
        "postgres": {
          "id": "m24TX4WQSDb5SDrS",
          "name": "Postgres account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‚ÄòTest workflow‚Äô": {
      "main": [
        [
          {
            "node": "Drop Table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Download PDF": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "text-embeddings-3-small": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Drop Table": {
      "main": [
        [
          {
            "node": "Download PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "bcfa2add-6750-4058-822c-1cfce2a1fee7",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "7e0fec4b281e56ef458b63cb966ca83a6460f0748605c50e4bd1bf0734d18030"
  },
  "id": "21eb6IaYetaTasyk",
  "tags": []
}
