{
  "name": "RAG - Ingest üë©‚Äçüéì",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -1700,
        -340
      ],
      "id": "f0221283-0740-4a5a-85a9-edfd4d778593",
      "name": "When clicking ‚ÄòTest workflow‚Äô"
    },
    {
      "parameters": {
        "mode": "insert",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePGVector",
      "typeVersion": 1.1,
      "position": [
        -1020,
        -340
      ],
      "id": "5d4a3f41-4fea-4467-9079-5519bb95c55e",
      "name": "Postgres PGVector Store",
      "credentials": {
        "postgres": {
          "id": "o9GP2TgDuLfm5BfE",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "ingestedOn",
                "value": "={{ $now.format('yyyy-MM-dd') }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        -920,
        -120
      ],
      "id": "e005e39f-6bd9-4938-a9b5-2ba645eb6558",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "chunkSize": 4096,
        "chunkOverlap": 256,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        -840,
        80
      ],
      "id": "a55ebf55-1f2e-4a81-9342-f851980fc87a",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {
        "url": "https://raw.githubusercontent.com/raonigabriel/easy-n8n/refs/heads/master/demo-rag/edital_de_abertura_n_102_1672798.pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1260,
        -340
      ],
      "id": "173c64c8-5a01-498b-a8df-fe5b445bfa89",
      "name": "Download PDF"
    },
    {
      "parameters": {
        "options": {
          "stripNewLines": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1060,
        -140
      ],
      "id": "7269ff77-d652-4f07-b357-fbaa164f9b7e",
      "name": "text-embeddings-3-small",
      "credentials": {
        "openAiApi": {
          "id": "JF04VkWoVyfuAYCo",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "DROP TABLE IF EXISTS n8n_vectors",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1480,
        -340
      ],
      "id": "cb9b13b5-8fc1-4ae4-855c-d235f6f83418",
      "name": "Drop Table",
      "credentials": {
        "postgres": {
          "id": "o9GP2TgDuLfm5BfE",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Simple RAG (naive)\n\n* **Ingest**\n* Agent\n\nhttps://github.com/raonigabriel/easy-n8n/tree/master/demo-rag",
        "height": 200,
        "width": 320
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1580,
        -80
      ],
      "typeVersion": 1,
      "id": "2c6f49b3-713f-42ac-a969-e0df4c1cae7f",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‚ÄòTest workflow‚Äô": {
      "main": [
        [
          {
            "node": "Drop Table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Download PDF": {
      "main": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "text-embeddings-3-small": {
      "ai_embedding": [
        [
          {
            "node": "Postgres PGVector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Drop Table": {
      "main": [
        [
          {
            "node": "Download PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "469a94c5-363c-4126-bb9d-2a16a7c54bdb",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "7e0fec4b281e56ef458b63cb966ca83a6460f0748605c50e4bd1bf0734d18030"
  },
  "id": "zG2ALzSfCTYsx8MB",
  "tags": []
}
